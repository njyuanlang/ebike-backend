!function(e,t,r){"use strict";var s="http://0.0.0.0:3000/api",u="authorization",d=t.module("lbServices",["ngResource"]);d.factory("User",["LoopBackResource","LoopBackAuth","$injector",function(e,t,r){var u=e(s+"/users/:id",{id:"@id"},{prototype$__findById__accessTokens:{params:{fk:"@fk"},url:s+"/users/:id/accessTokens/:fk",method:"GET"},prototype$__destroyById__accessTokens:{params:{fk:"@fk"},url:s+"/users/:id/accessTokens/:fk",method:"DELETE"},prototype$__updateById__accessTokens:{params:{fk:"@fk"},url:s+"/users/:id/accessTokens/:fk",method:"PUT"},prototype$__get__accessTokens:{isArray:!0,url:s+"/users/:id/accessTokens",method:"GET"},prototype$__create__accessTokens:{url:s+"/users/:id/accessTokens",method:"POST"},prototype$__delete__accessTokens:{url:s+"/users/:id/accessTokens",method:"DELETE"},prototype$__count__accessTokens:{url:s+"/users/:id/accessTokens/count",method:"GET"},create:{url:s+"/users",method:"POST"},createMany:{isArray:!0,url:s+"/users",method:"POST"},upsert:{url:s+"/users",method:"PUT"},exists:{url:s+"/users/:id/exists",method:"GET"},findById:{url:s+"/users/:id",method:"GET"},find:{isArray:!0,url:s+"/users",method:"GET"},findOne:{url:s+"/users/findOne",method:"GET"},updateAll:{url:s+"/users/update",method:"POST"},deleteById:{url:s+"/users/:id",method:"DELETE"},count:{url:s+"/users/count",method:"GET"},prototype$updateAttributes:{url:s+"/users/:id",method:"PUT"},createChangeStream:{url:s+"/users/change-stream",method:"POST"},login:{params:{include:"user"},interceptor:{response:function(e){var r=e.data;return t.setUser(r.id,r.userId,r.user),t.rememberMe=e.config.params.rememberMe!==!1,t.save(),e.resource}},url:s+"/users/login",method:"POST"},logout:{interceptor:{response:function(e){return t.clearUser(),t.clearStorage(),e.resource}},url:s+"/users/logout",method:"POST"},confirm:{url:s+"/users/confirm",method:"GET"},resetPassword:{url:s+"/users/reset",method:"POST"},stat:{isArray:!0,url:s+"/users/stat",method:"GET"},"::get::message::ToUser":{url:s+"/messages/:id/ToUser",method:"GET"},"::get::message::FromUser":{url:s+"/messages/:id/FromUser",method:"GET"},getCurrent:{url:s+"/users/:id",method:"GET",params:{id:function(){var e=t.currentUserId;return null==e&&(e="__anonymous__"),e}},interceptor:{response:function(e){return t.currentUserData=e.data,e.resource}},__isGetCurrentUser__:!0}});return u.updateOrCreate=u.upsert,u.update=u.updateAll,u.destroyById=u.deleteById,u.removeById=u.deleteById,u.getCachedCurrent=function(){var e=t.currentUserData;return e?new u(e):null},u.isAuthenticated=function(){return null!=this.getCurrentId()},u.getCurrentId=function(){return t.currentUserId},u.modelName="User",u}]),d.factory("Bike",["LoopBackResource","LoopBackAuth","$injector",function(e,t,r){var u=e(s+"/bikes/:id",{id:"@id"},{create:{url:s+"/bikes",method:"POST"},createMany:{isArray:!0,url:s+"/bikes",method:"POST"},upsert:{url:s+"/bikes",method:"PUT"},exists:{url:s+"/bikes/:id/exists",method:"GET"},findById:{url:s+"/bikes/:id",method:"GET"},find:{isArray:!0,url:s+"/bikes",method:"GET"},findOne:{url:s+"/bikes/findOne",method:"GET"},updateAll:{url:s+"/bikes/update",method:"POST"},deleteById:{url:s+"/bikes/:id",method:"DELETE"},count:{url:s+"/bikes/count",method:"GET"},prototype$updateAttributes:{url:s+"/bikes/:id",method:"PUT"},createChangeStream:{url:s+"/bikes/change-stream",method:"POST"},stat:{isArray:!0,url:s+"/bikes/stat",method:"GET"},statRegion:{url:s+"/bikes/statRegion",method:"GET"},findUsersByManufacturer:{isArray:!0,url:s+"/bikes/findUsersByManufacturer",method:"GET"},countUserByManufacturer:{url:s+"/bikes/countUserByManufacturer",method:"GET"},"::get::cruise::bike":{url:s+"/cruises/:id/bike",method:"GET"}});return u.updateOrCreate=u.upsert,u.update=u.updateAll,u.destroyById=u.deleteById,u.removeById=u.deleteById,u.modelName="Bike",u}]),d.factory("Manufacturer",["LoopBackResource","LoopBackAuth","$injector",function(e,t,r){var u=e(s+"/manufacturers/:id",{id:"@id"},{create:{url:s+"/manufacturers",method:"POST"},createMany:{isArray:!0,url:s+"/manufacturers",method:"POST"},upsert:{url:s+"/manufacturers",method:"PUT"},exists:{url:s+"/manufacturers/:id/exists",method:"GET"},findById:{url:s+"/manufacturers/:id",method:"GET"},find:{isArray:!0,url:s+"/manufacturers",method:"GET"},findOne:{url:s+"/manufacturers/findOne",method:"GET"},updateAll:{url:s+"/manufacturers/update",method:"POST"},deleteById:{url:s+"/manufacturers/:id",method:"DELETE"},count:{url:s+"/manufacturers/count",method:"GET"},prototype$updateAttributes:{url:s+"/manufacturers/:id",method:"PUT"},createChangeStream:{url:s+"/manufacturers/change-stream",method:"POST"},"::get::brand::manufacturer":{url:s+"/brands/:id/manufacturer",method:"GET"}});return u.updateOrCreate=u.upsert,u.update=u.updateAll,u.destroyById=u.deleteById,u.removeById=u.deleteById,u.modelName="Manufacturer",u}]),d.factory("Brand",["LoopBackResource","LoopBackAuth","$injector",function(e,t,r){var u=e(s+"/brands/:id",{id:"@id"},{prototype$__get__manufacturer:{url:s+"/brands/:id/manufacturer",method:"GET"},create:{url:s+"/brands",method:"POST"},createMany:{isArray:!0,url:s+"/brands",method:"POST"},upsert:{url:s+"/brands",method:"PUT"},exists:{url:s+"/brands/:id/exists",method:"GET"},findById:{url:s+"/brands/:id",method:"GET"},find:{isArray:!0,url:s+"/brands",method:"GET"},findOne:{url:s+"/brands/findOne",method:"GET"},updateAll:{url:s+"/brands/update",method:"POST"},deleteById:{url:s+"/brands/:id",method:"DELETE"},count:{url:s+"/brands/count",method:"GET"},prototype$updateAttributes:{url:s+"/brands/:id",method:"PUT"},createChangeStream:{url:s+"/brands/change-stream",method:"POST"},stat:{url:s+"/brands/stat",method:"GET"}});return u.updateOrCreate=u.upsert,u.update=u.updateAll,u.destroyById=u.deleteById,u.removeById=u.deleteById,u.modelName="Brand",u.manufacturer=function(){var e=r.get("Manufacturer"),t=e["::get::brand::manufacturer"];return t.apply(u,arguments)},u}]),d.factory("Authmessage",["LoopBackResource","LoopBackAuth","$injector",function(e,t,r){var u=e(s+"/authmessages/:id",{id:"@id"},{create:{url:s+"/authmessages",method:"POST"},createMany:{isArray:!0,url:s+"/authmessages",method:"POST"},upsert:{url:s+"/authmessages",method:"PUT"},exists:{url:s+"/authmessages/:id/exists",method:"GET"},findById:{url:s+"/authmessages/:id",method:"GET"},find:{isArray:!0,url:s+"/authmessages",method:"GET"},findOne:{url:s+"/authmessages/findOne",method:"GET"},updateAll:{url:s+"/authmessages/update",method:"POST"},deleteById:{url:s+"/authmessages/:id",method:"DELETE"},count:{url:s+"/authmessages/count",method:"GET"},prototype$updateAttributes:{url:s+"/authmessages/:id",method:"PUT"},createChangeStream:{url:s+"/authmessages/change-stream",method:"POST"}});return u.updateOrCreate=u.upsert,u.update=u.updateAll,u.destroyById=u.deleteById,u.removeById=u.deleteById,u.modelName="Authmessage",u}]),d.factory("Cruise",["LoopBackResource","LoopBackAuth","$injector",function(e,t,r){var u=e(s+"/cruises/:id",{id:"@id"},{prototype$__get__bike:{url:s+"/cruises/:id/bike",method:"GET"},create:{url:s+"/cruises",method:"POST"},createMany:{isArray:!0,url:s+"/cruises",method:"POST"},upsert:{url:s+"/cruises",method:"PUT"},exists:{url:s+"/cruises/:id/exists",method:"GET"},findById:{url:s+"/cruises/:id",method:"GET"},find:{isArray:!0,url:s+"/cruises",method:"GET"},findOne:{url:s+"/cruises/findOne",method:"GET"},updateAll:{url:s+"/cruises/update",method:"POST"},deleteById:{url:s+"/cruises/:id",method:"DELETE"},count:{url:s+"/cruises/count",method:"GET"},prototype$updateAttributes:{url:s+"/cruises/:id",method:"PUT"},createChangeStream:{url:s+"/cruises/change-stream",method:"POST"}});return u.updateOrCreate=u.upsert,u.update=u.updateAll,u.destroyById=u.deleteById,u.removeById=u.deleteById,u.modelName="Cruise",u.bike=function(){var e=r.get("Bike"),t=e["::get::cruise::bike"];return t.apply(u,arguments)},u}]),d.factory("Test",["LoopBackResource","LoopBackAuth","$injector",function(e,t,r){var u=e(s+"/tests/:id",{id:"@id"},{create:{url:s+"/tests",method:"POST"},createMany:{isArray:!0,url:s+"/tests",method:"POST"},upsert:{url:s+"/tests",method:"PUT"},exists:{url:s+"/tests/:id/exists",method:"GET"},findById:{url:s+"/tests/:id",method:"GET"},find:{isArray:!0,url:s+"/tests",method:"GET"},findOne:{url:s+"/tests/findOne",method:"GET"},updateAll:{url:s+"/tests/update",method:"POST"},deleteById:{url:s+"/tests/:id",method:"DELETE"},count:{url:s+"/tests/count",method:"GET"},prototype$updateAttributes:{url:s+"/tests/:id",method:"PUT"},createChangeStream:{url:s+"/tests/change-stream",method:"POST"},stat:{isArray:!0,url:s+"/tests/stat",method:"GET"}});return u.updateOrCreate=u.upsert,u.update=u.updateAll,u.destroyById=u.deleteById,u.removeById=u.deleteById,u.modelName="Test",u}]),d.factory("Device",["LoopBackResource","LoopBackAuth","$injector",function(e,t,r){var u=e(s+"/devices/:id",{id:"@id"},{create:{url:s+"/devices",method:"POST"},createMany:{isArray:!0,url:s+"/devices",method:"POST"},upsert:{url:s+"/devices",method:"PUT"},exists:{url:s+"/devices/:id/exists",method:"GET"},findById:{url:s+"/devices/:id",method:"GET"},find:{isArray:!0,url:s+"/devices",method:"GET"},findOne:{url:s+"/devices/findOne",method:"GET"},updateAll:{url:s+"/devices/update",method:"POST"},deleteById:{url:s+"/devices/:id",method:"DELETE"},count:{url:s+"/devices/count",method:"GET"},prototype$updateAttributes:{url:s+"/devices/:id",method:"PUT"},createChangeStream:{url:s+"/devices/change-stream",method:"POST"}});return u.updateOrCreate=u.upsert,u.update=u.updateAll,u.destroyById=u.deleteById,u.removeById=u.deleteById,u.modelName="Device",u}]),d.factory("Upload",["LoopBackResource","LoopBackAuth","$injector",function(e,t,r){var u=e(s+"/uploads/:id",{id:"@id"},{getContainers:{isArray:!0,url:s+"/uploads",method:"GET"},createContainer:{url:s+"/uploads",method:"POST"},destroyContainer:{url:s+"/uploads/:container",method:"DELETE"},getContainer:{url:s+"/uploads/:container",method:"GET"},getFiles:{isArray:!0,url:s+"/uploads/:container/files",method:"GET"},getFile:{url:s+"/uploads/:container/files/:file",method:"GET"},removeFile:{url:s+"/uploads/:container/files/:file",method:"DELETE"},upload:{url:s+"/uploads/:container/upload",method:"POST"},download:{url:s+"/uploads/:container/download/:file",method:"GET"}});return u.modelName="Upload",u}]),d.factory("Poi",["LoopBackResource","LoopBackAuth","$injector",function(e,t,r){var u=e(s+"/pois/:id",{id:"@id"},{create:{url:s+"/pois",method:"POST"},createMany:{isArray:!0,url:s+"/pois",method:"POST"},upsert:{url:s+"/pois",method:"PUT"},exists:{url:s+"/pois/:id/exists",method:"GET"},findById:{url:s+"/pois/:id",method:"GET"},find:{isArray:!0,url:s+"/pois",method:"GET"},findOne:{url:s+"/pois/findOne",method:"GET"},updateAll:{url:s+"/pois/update",method:"POST"},deleteById:{url:s+"/pois/:id",method:"DELETE"},count:{url:s+"/pois/count",method:"GET"},prototype$updateAttributes:{url:s+"/pois/:id",method:"PUT"},createChangeStream:{url:s+"/pois/change-stream",method:"POST"}});return u.updateOrCreate=u.upsert,u.update=u.updateAll,u.destroyById=u.deleteById,u.removeById=u.deleteById,u.modelName="Poi",u}]),d.factory("Message",["LoopBackResource","LoopBackAuth","$injector",function(e,t,r){var u=e(s+"/messages/:id",{id:"@id"},{prototype$__get__ToUser:{url:s+"/messages/:id/ToUser",method:"GET"},prototype$__get__FromUser:{url:s+"/messages/:id/FromUser",method:"GET"},create:{url:s+"/messages",method:"POST"},createMany:{isArray:!0,url:s+"/messages",method:"POST"},upsert:{url:s+"/messages",method:"PUT"},exists:{url:s+"/messages/:id/exists",method:"GET"},findById:{url:s+"/messages/:id",method:"GET"},find:{isArray:!0,url:s+"/messages",method:"GET"},findOne:{url:s+"/messages/findOne",method:"GET"},updateAll:{url:s+"/messages/update",method:"POST"},deleteById:{url:s+"/messages/:id",method:"DELETE"},count:{url:s+"/messages/count",method:"GET"},prototype$updateAttributes:{url:s+"/messages/:id",method:"PUT"},createChangeStream:{url:s+"/messages/change-stream",method:"POST"},chats:{isArray:!0,url:s+"/messages/chats",method:"GET"}});return u.updateOrCreate=u.upsert,u.update=u.updateAll,u.destroyById=u.deleteById,u.removeById=u.deleteById,u.modelName="Message",u.ToUser=function(){var e=r.get("User"),t=e["::get::message::ToUser"];return t.apply(u,arguments)},u.FromUser=function(){var e=r.get("User"),t=e["::get::message::FromUser"];return t.apply(u,arguments)},u}]),d.factory("LoopBackAuth",function(){function e(){var e=this;u.forEach(function(t){e[t]=s(t)}),this.rememberMe=r,this.currentUserData=null}function t(e,t,r){var s=d+t;null==r&&(r=""),e[s]=r}function s(e){var t=d+e;return localStorage[t]||sessionStorage[t]||null}var u=["accessTokenId","currentUserId"],d="$LoopBack$";return e.prototype.save=function(){var e=this,r=this.rememberMe?localStorage:sessionStorage;u.forEach(function(s){t(r,s,e[s])})},e.prototype.setUser=function(e,t,r){this.accessTokenId=e,this.currentUserId=t,this.currentUserData=r},e.prototype.clearUser=function(){this.accessTokenId=null,this.currentUserId=null,this.currentUserData=null},e.prototype.clearStorage=function(){u.forEach(function(e){t(sessionStorage,e,null),t(localStorage,e,null)})},new e}).config(["$httpProvider",function(e){e.interceptors.push("LoopBackAuthRequestInterceptor")}]).factory("LoopBackAuthRequestInterceptor",["$q","LoopBackAuth",function(e,t){return{request:function(d){if(d.url.substr(0,s.length)!==s)return d;if(t.accessTokenId)d.headers[u]=t.accessTokenId;else if(d.__isGetCurrentUser__){var o={body:{error:{status:401}},status:401,config:d,headers:function(){return r}};return e.reject(o)}return d||e.when(d)}}}]).provider("LoopBackResource",function(){this.setAuthHeader=function(e){u=e},this.setUrlBase=function(e){s=e},this.getUrlBase=function(){return s},this.$get=["$resource",function(e){return function(t,r,s){var u=e(t,r,s);return u.prototype.$save=function(e,t){var r=u.upsert.call(this,{},this,e,t);return r.$promise||r},u}}]})}(window,window.angular);